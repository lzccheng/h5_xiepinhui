webpackJsonp([33],{"/2/x":function(t,e,n){var a=n("9YdK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("8bb10774",a,!0,{})},"2BX2":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"logion-top-bg"}),t._v(" "),n("div",{staticClass:"loginMain"},[t.isWX?n("div",{staticClass:"other_login",on:{click:t.wxLogin}},[n("div",{staticClass:"wxLogin"}),t._v(" "),n("div",{staticClass:"test"},[t._v("\n        微信一键登录，安全又方便\n      ")])]):t._e(),t._v(" "),n("ul",{staticClass:"login-input"},[n("li",[n("span",{staticClass:"logion-lable"},[t._v("+86")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticStyle:{"padding-left":"1.1rem"},attrs:{maxlength:"11",id:"username",type:"number",placeholder:"手机"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),n("li",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"请输入6-12位密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),n("p",[n("a",{staticClass:"forgot pull-right",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.$router.push("find_password")}}},[t._v("忘记密码？")])]),t._v(" "),n("a",{staticClass:"loginBtn",attrs:{href:"javascript:void(0);"},on:{click:t.checkInfo}},[t._v("登录")]),t._v(" "),n("div",{staticClass:"register",on:{click:function(e){t.$router.push("register_password")}}},[t._v("还没有账号？ "),n("span",{staticStyle:{color:"#61D8D0"}},[t._v("现在注册→")])])])])},r=[],o={render:a,staticRenderFns:r};e.a=o},"740R":function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),o=a(r),i=n("mvHQ"),s=a(i),u=n("d7EF"),c=a(u),d=n("exGp"),l=a(d),p=n("Dd8w"),h=a(p),A=n("VsUZ"),f=n("mCTZ"),g=n("mtWM"),b=a(g),m=n("NYxO");e.default={name:"login",props:{},components:{},data:function(){return{url:"",access_code:"",isWX:!1,phone:"",password:""}},created:function(){if(this.isWX=(0,f.isWeiXin)(),this.url=window.location.search.split("?url=")[1]||"/",this.access_code=(0,f.getQueryString)("code"),this.user&&!this.token){var t={plat:3,type:1,unionid:this.user.unionid,openid:this.user.openid,nick:this.user.nickname,avatar:this.user.headimgurl};this.loginthirdFun(t)}this.access_code&&this.wxLogin()},mounted:function(){},methods:(0,h.default)({},(0,m.mapMutations)(["updateManager","updateToken","updateAccount"]),(0,m.mapActions)(["updateUser"]),{checkInfo:function(){function t(){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(){var e,n,a,r,i,u,d,l;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,n=/^1[0-9]{10,}$/,a=n.test(this.phone)){t.next=6;break}return this.$vux.toast.text("请输入正确的手机号"),t.abrupt("return");case 6:if(this.password){t.next=9;break}return this.$vux.toast.text("请输入密码"),t.abrupt("return");case 9:if(this.password.length>5&&this.password.length<12){t.next=12;break}return this.$vux.toast.text("密码长度不正确"),t.abrupt("return");case 12:return r={plat:3,tel:this.phone,pwd:this.$encrypt(this.password)},this.$vux.loading.show({text:"Loading"}),t.next=16,A.api.login(r);case 16:if(i=t.sent,u=(0,c.default)(i,2),d=u[0],l=u[1],!d){t.next=26;break}if(4004!==d.code){t.next=24;break}return this.$vux.toast.text("该账号尚未注册,清先注册"),t.abrupt("return");case 24:return this.$vux.toast.text(d.msg,"top"),t.abrupt("return");case 26:if(console.log("登录",l),this.$vux.toast.show({type:"success",text:"登录成功"}),this.updateUser(l.data),this.updateToken(l.data.token),this.updateAccount(l.data.account),localStorage.user=(0,s.default)(l.data),localStorage.account=l.data.account,localStorage.token=l.data.token,!this.$route.query.from_){t.next=36;break}return t.abrupt("return",this.$router.replace({path:this.$route.query.from_,codeInvite:this.$route.query.codeInvite}));case 36:"/"===this.url?this.$router.replace("/"):window.location.href=unescape(this.url);case 37:case"end":return t.stop()}},t,this)}));return t}(),wxLogin:function(){function t(){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(){var e,n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,console.log(this.access_code),this.access_code&&""!==this.access_code&&void 0!==this.access_code?(void 0==this.url||"/"==this.url?this.url="/":this.url=this.url.substring(0,this.url.indexOf("&code")),b.default.get("https://api.dev.xiepinhui.com.cn/user/hfiveopenid",{params:{code:this.access_code}}).then(function(){var t=(0,l.default)(o.default.mark(function t(n){var a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={plat:3,type:1,unionid:n.data.data.unionid,openid:n.data.data.openid,nick:n.data.data.nickname,avatar:n.data.data.headimgurl},console.log("user user",n.data.data),e.updateUser(n.data.data),localStorage.user=(0,s.default)(n.data.data),e.loginthirdFun(a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log(t),this.$vux.toast.text("微信登录参数出错")})):(n=window.location.origin+"?url=/user/login",window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx47d52b6420c14397&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=getUser#wechat_redirect");case 3:case"end":return t.stop()}},t,this)}));return t}(),loginthirdFun:function(){function t(t){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(e){var n,a,r,i,u;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.next=3,A.api.loginthird(e);case 3:if(a=t.sent,r=(0,c.default)(a,2),i=r[0],u=r[1],!i){t.next=15;break}if(4999!==i.code){t.next=11;break}return n.$router.push({path:"phone_bind",query:{url:n.url,unionid:e.unionid||e.openid}}),t.abrupt("return");case 11:return n.$vux.toast.text(i.msg),n.access_code="",n.$router.push("/user/login"),t.abrupt("return");case 15:if(console.log("user user",u.data),this.updateUser(u.data),localStorage.user=(0,s.default)(u.data),this.updateToken(u.data.token),this.updateAccount(u.data.account),localStorage.token=u.data.token,localStorage.account=u.data.account,!this.$route.query.from_){t.next=24;break}return t.abrupt("return",this.$router.replace({path:this.$route.query.from_,codeInvite:this.$route.query.codeInvite}));case 24:"/"===n.url?n.$router.replace("/"):window.location.href=unescape(n.url),n.$vux.toast.show({type:"success",text:"微信登录成功"});case 26:case"end":return t.stop()}},t,this)}));return t}(),showShareCode:function(){function t(){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(){var e,n,a,r,i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={plat:3,account:this.account,token:this.token},t.next=3,A.api.login(e);case 3:if(n=t.sent,a=(0,c.default)(n,2),r=a[0],i=a[1],!r){t.next=10;break}return this.$vux.toast.text(r.msg,"top"),t.abrupt("return");case 10:2e3==i.code&&(localStorage.SelfCode=i.data.code,localStorage.partner_type=i.data.partner_type);case 11:case"end":return t.stop()}},t,this)}));return t}()}),computed:(0,h.default)({},(0,m.mapGetters)(["user","account","token"]))}},"9YdK":function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,'\n.wrap[data-v-bfb06cfa] {\n  height: 110%;\n  min-height: 100%;\n  min-height: 110vh;\n  -webkit-overflow-scrolling: touch;\n  overflow-y: scroll;\n}\n.logion-top-bg[data-v-bfb06cfa] {\n  width: 100%;\n  background: url("http://img.xiepinhui.com.cn/small_app/programOldImgFile/upLogo.png");\n  height: 2.45rem;\n  background-size: 100% 100%;\n}\n.loginMain[data-v-bfb06cfa] {\n  box-sizing: border-box;\n  padding: 0.65rem 1rem;\n}\n.other_login .test[data-v-bfb06cfa] {\n  text-align: center;\n  font-size: 0.28rem;\n  color: #333333;\n  padding-bottom: 0.61rem;\n}\n.wxLogin[data-v-bfb06cfa] {\n  width: 1.8rem;\n  height: 1.8rem;\n  border-radius: 100%;\n  background: url(http://img.xiepinhui.com.cn/web_logion/wx-login-btn.png);\n  background-size: 100% 100%;\n  margin: auto;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.loginMain .login-input li[data-v-bfb06cfa] {\n  border-bottom: 1px #e6e6e6 solid;\n  border-radius: 0;\n}\n.loginMain ul li[data-v-bfb06cfa] {\n  width: 100%;\n  height: 1rem;\n  background: rgba(255, 255, 255, 0.4);\n  margin-bottom: 0.12rem;\n  position: relative;\n  border-radius: 5px;\n  overflow: hidden;\n}\n.loginMain ul li span[data-v-bfb06cfa] {\n  position: relative;\n  font-size: 0.28rem;\n  width: 0.7rem;\n  height: 0.7rem;\n  display: inline-block;\n  position: absolute;\n  top: 0.15rem;\n  left: 0.1rem;\n}\n.loginMain ul li span[data-v-bfb06cfa]::after {\n  content: "";\n  display: block;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 1px;\n  height: 50%;\n  background: #999;\n  -webkit-transform: translateY(50%);\n          transform: translateY(50%);\n}\n.logion-lable[data-v-bfb06cfa] {\n  height: 0.7rem;\n  line-height: 0.7rem;\n  color: #333;\n}\n.loginMain ul li input[data-v-bfb06cfa] {\n  width: 100%;\n  height: 1rem;\n  background-color: transparent;\n  border: none;\n  outline: none;\n  padding-left: 0.2rem;\n  color: #333;\n  font-size: 0.28rem;\n  box-sizing: border-box;\n}\n.loginMain p a[data-v-bfb06cfa] {\n  color: #61d8d0;\n  display: inline-block;\n  font-size: 0.28rem;\n}\n.pull-right[data-v-bfb06cfa] {\n  float: right;\n}\na[data-v-bfb06cfa] {\n  text-decoration: none;\n}\n.loginMain a.loginBtn[data-v-bfb06cfa] {\n  display: block;\n  width: 100%;\n  color: #fff;\n  line-height: 0.92rem;\n  height: 0.92rem;\n  border: 1px solid #fff;\n  text-align: center;\n  box-sizing: border-box;\n  margin-top: 1.1rem;\n  border-radius: 5px;\n  font-size: 0.28rem;\n  background: #61d8d0;\n  border-radius: 0.54rem;\n}\n.loginBtn[data-v-bfb06cfa] {\n  border: 0;\n  background: #61d8d0;\n  border-radius: 54px;\n}\n.register[data-v-bfb06cfa] {\n  margin-top: 0.39rem;\n  text-align: center;\n  font-size: 0.28rem;\n  line-height: 40px;\n}\n',"",{version:3,sources:["E:/project/h5_xiepinhui/dev/src/page/user/login.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,iBAAiB;EACjB,kBAAkB;EAClB,kCAAkC;EAClC,mBAAmB;CACpB;AACD;EACE,YAAY;EACZ,sFAAsF;EACtF,gBAAgB;EAChB,2BAA2B;CAC5B;AACD;EACE,uBAAuB;EACvB,sBAAsB;CACvB;AACD;EACE,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,wBAAwB;CACzB;AACD;EACE,cAAc;EACd,eAAe;EACf,oBAAoB;EACpB,yEAAyE;EACzE,2BAA2B;EAC3B,aAAa;EACb,iBAAiB;EACjB,oBAAoB;CACrB;AACD;EACE,iCAAiC;EACjC,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,aAAa;EACb,qCAAqC;EACrC,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,sBAAsB;EACtB,mBAAmB;EACnB,aAAa;EACb,aAAa;CACd;AACD;EACE,YAAY;EACZ,eAAe;EACf,mBAAmB;EACnB,SAAS;EACT,OAAO;EACP,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,mCAAmC;UAC3B,2BAA2B;CACpC;AACD;EACE,eAAe;EACf,oBAAoB;EACpB,YAAY;CACb;AACD;EACE,YAAY;EACZ,aAAa;EACb,8BAA8B;EAC9B,aAAa;EACb,cAAc;EACd,qBAAqB;EACrB,YAAY;EACZ,mBAAmB;EACnB,uBAAuB;CACxB;AACD;EACE,eAAe;EACf,sBAAsB;EACtB,mBAAmB;CACpB;AACD;EACE,aAAa;CACd;AACD;EACE,sBAAsB;CACvB;AACD;EACE,eAAe;EACf,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,mBAAmB;EACnB,oBAAoB;EACpB,uBAAuB;CACxB;AACD;EACE,UAAU;EACV,oBAAoB;EACpB,oBAAoB;CACrB;AACD;EACE,oBAAoB;EACpB,mBAAmB;EACnB,mBAAmB;EACnB,kBAAkB;CACnB",file:"login.vue",sourcesContent:['\n.wrap[data-v-bfb06cfa] {\n  height: 110%;\n  min-height: 100%;\n  min-height: 110vh;\n  -webkit-overflow-scrolling: touch;\n  overflow-y: scroll;\n}\n.logion-top-bg[data-v-bfb06cfa] {\n  width: 100%;\n  background: url("http://img.xiepinhui.com.cn/small_app/programOldImgFile/upLogo.png");\n  height: 2.45rem;\n  background-size: 100% 100%;\n}\n.loginMain[data-v-bfb06cfa] {\n  box-sizing: border-box;\n  padding: 0.65rem 1rem;\n}\n.other_login .test[data-v-bfb06cfa] {\n  text-align: center;\n  font-size: 0.28rem;\n  color: #333333;\n  padding-bottom: 0.61rem;\n}\n.wxLogin[data-v-bfb06cfa] {\n  width: 1.8rem;\n  height: 1.8rem;\n  border-radius: 100%;\n  background: url(http://img.xiepinhui.com.cn/web_logion/wx-login-btn.png);\n  background-size: 100% 100%;\n  margin: auto;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.loginMain .login-input li[data-v-bfb06cfa] {\n  border-bottom: 1px #e6e6e6 solid;\n  border-radius: 0;\n}\n.loginMain ul li[data-v-bfb06cfa] {\n  width: 100%;\n  height: 1rem;\n  background: rgba(255, 255, 255, 0.4);\n  margin-bottom: 0.12rem;\n  position: relative;\n  border-radius: 5px;\n  overflow: hidden;\n}\n.loginMain ul li span[data-v-bfb06cfa] {\n  position: relative;\n  font-size: 0.28rem;\n  width: 0.7rem;\n  height: 0.7rem;\n  display: inline-block;\n  position: absolute;\n  top: 0.15rem;\n  left: 0.1rem;\n}\n.loginMain ul li span[data-v-bfb06cfa]::after {\n  content: "";\n  display: block;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 1px;\n  height: 50%;\n  background: #999;\n  -webkit-transform: translateY(50%);\n          transform: translateY(50%);\n}\n.logion-lable[data-v-bfb06cfa] {\n  height: 0.7rem;\n  line-height: 0.7rem;\n  color: #333;\n}\n.loginMain ul li input[data-v-bfb06cfa] {\n  width: 100%;\n  height: 1rem;\n  background-color: transparent;\n  border: none;\n  outline: none;\n  padding-left: 0.2rem;\n  color: #333;\n  font-size: 0.28rem;\n  box-sizing: border-box;\n}\n.loginMain p a[data-v-bfb06cfa] {\n  color: #61d8d0;\n  display: inline-block;\n  font-size: 0.28rem;\n}\n.pull-right[data-v-bfb06cfa] {\n  float: right;\n}\na[data-v-bfb06cfa] {\n  text-decoration: none;\n}\n.loginMain a.loginBtn[data-v-bfb06cfa] {\n  display: block;\n  width: 100%;\n  color: #fff;\n  line-height: 0.92rem;\n  height: 0.92rem;\n  border: 1px solid #fff;\n  text-align: center;\n  box-sizing: border-box;\n  margin-top: 1.1rem;\n  border-radius: 5px;\n  font-size: 0.28rem;\n  background: #61d8d0;\n  border-radius: 0.54rem;\n}\n.loginBtn[data-v-bfb06cfa] {\n  border: 0;\n  background: #61d8d0;\n  border-radius: 54px;\n}\n.register[data-v-bfb06cfa] {\n  margin-top: 0.39rem;\n  text-align: center;\n  font-size: 0.28rem;\n  line-height: 40px;\n}\n'],sourceRoot:""}])},CxVj:function(t,e,n){"use strict";function a(t){n("/2/x")}Object.defineProperty(e,"__esModule",{value:!0});var r=n("LPCv");n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n("740R"),s=n.n(i),u=n("2BX2"),c=n("VU/8"),d=a,l=c(s.a,u.a,!1,d,"data-v-bfb06cfa",null);e.default=l.exports},LPCv:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),o=a(r),i=n("mvHQ"),s=a(i),u=n("d7EF"),c=a(u),d=n("exGp"),l=a(d),p=n("Dd8w"),h=a(p),A=n("VsUZ"),f=n("mCTZ"),g=n("mtWM"),b=a(g),m=n("NYxO");e.default={name:"login",props:{},components:{},data:function(){return{url:"",access_code:"",isWX:!1,phone:"",password:""}},created:function(){if(this.isWX=(0,f.isWeiXin)(),this.url=window.location.search.split("?url=")[1]||"/",this.access_code=(0,f.getQueryString)("code"),this.user&&!this.token){var t={plat:3,type:1,unionid:this.user.unionid,openid:this.user.openid,nick:this.user.nickname,avatar:this.user.headimgurl};this.loginthirdFun(t)}this.access_code&&this.wxLogin()},mounted:function(){},methods:(0,h.default)({},(0,m.mapMutations)(["updateManager","updateToken","updateAccount"]),(0,m.mapActions)(["updateUser"]),{checkInfo:function(){function t(){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(){var e,n,a,r,i,u,d,l;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,n=/^1[0-9]{10,}$/,a=n.test(this.phone)){t.next=6;break}return this.$vux.toast.text("请输入正确的手机号"),t.abrupt("return");case 6:if(this.password){t.next=9;break}return this.$vux.toast.text("请输入密码"),t.abrupt("return");case 9:if(this.password.length>5&&this.password.length<12){t.next=12;break}return this.$vux.toast.text("密码长度不正确"),t.abrupt("return");case 12:return r={plat:3,tel:this.phone,pwd:this.$encrypt(this.password)},this.$vux.loading.show({text:"Loading"}),t.next=16,A.api.login(r);case 16:if(i=t.sent,u=(0,c.default)(i,2),d=u[0],l=u[1],!d){t.next=26;break}if(4004!==d.code){t.next=24;break}return this.$vux.toast.text("该账号尚未注册,清先注册"),t.abrupt("return");case 24:return this.$vux.toast.text(d.msg,"top"),t.abrupt("return");case 26:if(console.log("登录",l),this.$vux.toast.show({type:"success",text:"登录成功"}),this.updateUser(l.data),this.updateToken(l.data.token),this.updateAccount(l.data.account),localStorage.user=(0,s.default)(l.data),localStorage.account=l.data.account,localStorage.token=l.data.token,!this.$route.query.from_){t.next=36;break}return t.abrupt("return",this.$router.replace({path:this.$route.query.from_,codeInvite:this.$route.query.codeInvite}));case 36:"/"===this.url?this.$router.replace("/"):window.location.href=unescape(this.url);case 37:case"end":return t.stop()}},t,this)}));return t}(),wxLogin:function(){function t(){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(){var e,n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,console.log(this.access_code),this.access_code&&""!==this.access_code&&void 0!==this.access_code?(void 0==this.url||"/"==this.url?this.url="/":this.url=this.url.substring(0,this.url.indexOf("&code")),b.default.get("https://api.dev.xiepinhui.com.cn/user/hfiveopenid",{params:{code:this.access_code}}).then(function(){var t=(0,l.default)(o.default.mark(function t(n){var a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={plat:3,type:1,unionid:n.data.data.unionid,openid:n.data.data.openid,nick:n.data.data.nickname,avatar:n.data.data.headimgurl},console.log("user user",n.data.data),e.updateUser(n.data.data),localStorage.user=(0,s.default)(n.data.data),e.loginthirdFun(a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log(t),this.$vux.toast.text("微信登录参数出错")})):(n=window.location.origin+"?url=/user/login",window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx47d52b6420c14397&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=getUser#wechat_redirect");case 3:case"end":return t.stop()}},t,this)}));return t}(),loginthirdFun:function(){function t(t){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(e){var n,a,r,i,u;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.next=3,A.api.loginthird(e);case 3:if(a=t.sent,r=(0,c.default)(a,2),i=r[0],u=r[1],!i){t.next=15;break}if(4999!==i.code){t.next=11;break}return n.$router.push({path:"phone_bind",query:{url:n.url,unionid:e.unionid||e.openid}}),t.abrupt("return");case 11:return n.$vux.toast.text(i.msg),n.access_code="",n.$router.push("/user/login"),t.abrupt("return");case 15:if(console.log("user user",u.data),this.updateUser(u.data),localStorage.user=(0,s.default)(u.data),this.updateToken(u.data.token),this.updateAccount(u.data.account),localStorage.token=u.data.token,localStorage.account=u.data.account,!this.$route.query.from_){t.next=24;break}return t.abrupt("return",this.$router.replace({path:this.$route.query.from_,codeInvite:this.$route.query.codeInvite}));case 24:"/"===n.url?n.$router.replace("/"):window.location.href=unescape(n.url),n.$vux.toast.show({type:"success",text:"微信登录成功"});case 26:case"end":return t.stop()}},t,this)}));return t}(),showShareCode:function(){function t(){return e.apply(this,arguments)}var e=(0,l.default)(o.default.mark(function t(){var e,n,a,r,i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={plat:3,account:this.account,token:this.token},t.next=3,A.api.login(e);case 3:if(n=t.sent,a=(0,c.default)(n,2),r=a[0],i=a[1],!r){t.next=10;break}return this.$vux.toast.text(r.msg,"top"),t.abrupt("return");case 10:2e3==i.code&&(localStorage.SelfCode=i.data.code,localStorage.partner_type=i.data.partner_type);case 11:case"end":return t.stop()}},t,this)}));return t}()}),computed:(0,h.default)({},(0,m.mapGetters)(["user","account","token"]))}}});
//# sourceMappingURL=33.e91172911d9dddee57e1.js.map